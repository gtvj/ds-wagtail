{% load wagtailcore_tags wagtailimages_tags %}
<div class="related-article-cards">
    <div class="container">
    <div class="card-grid card-grid__trio card-grid__trio--large-gaps">
        {% for article in articles %}
            <a class="related-article-cards__card" href={% pageurl article %}>
                <picture>
                    {% image article.teaser_image fill-342x229-c100 format-webp as mobile_webp_image %}
                    <source media="(max-width: 390px)"
                            srcset="{{ mobile_webp_image.url }}"
                            type="image/webp"/>
                    {% image article.teaser_image fill-369x229-c100 format-webp as desktop_webp_image %}
                    <source srcset="{{ desktop_webp_image.url }}" type="image/webp"/>
                    {% image article.teaser_image fill-342x229-c100 as mobile_img %}
                    <source srcset="{{ mobile_img.url }}" media="(max-width: 390px)"/>
                    {% image article.teaser_image fill-369x229-c100 as base_img %}
                    <img src="{{ base_img.url }}"
                         height="{{ base_img.height }}"
                         width="{{ base_img.width }}"
                         class="related-highlight-cards__image"
                         {% if article.teaser_image.alt_text %} alt="{{ article.teaser_image.alt_text }}"{% endif %}/>
                </picture>
                <div class="related-article-cards__content">
                    <h3 class="related-article-cards__title">{{ article.title }}</h3>
                    <p class="related-article-cards__text">{{ article.teaser_text }}</p>
                </div>
            </a>
        {% endfor %}
        </div>
    </div>
</div>
