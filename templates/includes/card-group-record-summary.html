{% load wagtailimages_tags %}

<li class="col-sm-12 col-md-6 col-lg-4">
    <div class="card-group-record-summary">
        <a href="{% url 'details-page-machine-readable' iaid=record_page.iaid %}" class="card-group-record-summary__link" data-card-type="card-group-record-summary" data-card-title="{{ record_page.title }}">
            <h3 class="card-group-record-summary__heading">{{ record_page.title }}</h3>
            <figure>
                {% if teaser_image %}

                    {% image teaser_image fill-288x292 as teaser_image_small %}
                    {% image teaser_image fill-328x322 as teaser_image_medium %}
                    {% image teaser_image fill-348x352 as teaser_image_large %}
                    {% image teaser_image fill-543x549 as teaser_image_extra_large %}

                    <div class="card-group-record-summary__image">
                        <picture>
                            <source media="(max-width: 768px)" srcset="{{ teaser_image_extra_large.url }}">
                            <source media="(max-width: 991px)" srcset="{{ teaser_image_medium.url }}">
                            <source media="(max-width: 1199px)" srcset="{{ teaser_image_small.url }}">
                            <source media="(min-width: 1200px)" srcset="{{ teaser_image_large.url }}">
                            <img src="{{ teaser_image_extra_large.url }}" alt="" class="card-group-record-summary__image-fallback">
                        </picture>
                    </div>
                {% endif %}
                    <figcaption class="card-group-record-summary__body">{{ description_override|default:record_page.description|safe }}</figcaption>
            </figure>
        </a>
    </div>
</li>
