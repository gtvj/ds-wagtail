{% extends 'base_page.html' %}
{% load static %}

{% block content %}

    {% include 'includes/results-intro-with-prefix.html' %}
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="mt-4">
                    <p>{{ page.introduction }}</p>
                </div>
                <div class="results">
                    <div class="row">
                        <h2 class="sr-only">Items</h2>
                        <ul class="card-group--list-style-none" id="analytics-explorer-results" data-container-name="explorer-results">
                            {% for result_page_record in page.records.all %}
                                {% comment %}
                                 It's possible for the request for record data from Kong could fail
                                 resulting in no record page being associated with ResultsPageRecord.

                                 If so, skip the record.
                                {% endcomment %}
                                {% if result_page_record.record %}
                                    {% if result_page_record.teaser_image %}
                                        {% include 'includes/card-group-record-summary.html' with record=result_page_record.record teaser_image=result_page_record.teaser_image description_override=result_page_record.description only %}
                                    {% else %}
                                        {% include 'includes/card-group-record-summary-no-image.html' with record=result_page_record.record description_override=result_page_record.description only %}
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        </ul>
                    </div>
                    {% comment %}
                        <h3 class="sr-only">Pagination</h3>
                        {% include 'includes/pagination.html' %}
                    {% endcomment %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'scripts/explorer.js' %}"></script>
{% endblock %}
