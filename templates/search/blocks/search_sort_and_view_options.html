{% load search_tags %}

<div class="search-sort-view">
    <form action='' method="GET" class="search-sort-view__form" data-id="sort-form" id="catalogue-sort-form">
        {% prepare_form_for_partial_render form 'sort_by' %}
        <h2 class="search-sort-view__heading">
           <label for="{{form.sort_by.id_for_label}}">Sort by</label>
        </h2>
        {{ form.sort_by.errors }}
        {{ form.sort_by }}

        <input type="hidden" name="q" value="{{form.q.value}}" id="id_q_SSAVO">
        <input type="hidden" name="group" value="{{form.group.value}}" id="id_group_SSAVO">
        <input type="hidden" name="sort_order" value="{{form.sort_order.value}}" id="id_sort_order_SSAVO">
        <input type="hidden" name="per_page" value="{{form.per_page.value}}" id="id_per_page_SSAVO">

        <input type="submit" value="Update" class="search-sort-view__form-submit">
    </form>

    <h2 class="search-sort-view__heading"><span class="sr-only">Display as:</span></h2>
    <ul class="search-sort-view__list">

        <li class="search-sort-view__list-item">
            {% if form.cleaned_data.display == 'list' or form.cleaned_data.display == '' %}
                <span aria-current="true" class="search-sort-view__icon-list">
                    <span class="sr-only">Displaying results as a list</span>
                </span>
            {% else %}
                <a href="?{% query_string_include 'display' 'list' %}" class="search-sort-view__icon-list">
                    <span class="sr-only">Displaying results as a list</span>
                </a>
            {% endif %}
            </a>
        </li>
        <li class="search-sort-view__list-item">
            {% if form.cleaned_data.display == 'grid' %}
                <span aria-current="true" class="search-sort-view__icon-grid">
                    <span class="sr-only">Displaying results as a grid</span>
                </span>
            {% else %}
                <a href="?{% query_string_include 'display' 'grid' %}" class="search-sort-view__icon-grid">
                    <span class="sr-only">Display results as a grid</span>
                </a>
            {% endif %}
        </li>

        {{ form.display.errors }}
        {{ form.display.as_hidden }}
    </ul>
</div>
