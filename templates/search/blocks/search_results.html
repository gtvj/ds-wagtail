{% load search_tags %}
{% load humanize %}

{{ selected_filters_count|json_script:"selected_filters_count" }}
<script>
    $noOfFilters = JSON.parse(document.getElementById('selected_filters_count').textContent);
    let $buttonHtml= "Filters <span class='filter-indicator'>"+ $noOfFilters +"</span>";
</script>

<div class="search-results">

    <div class="search-results__metadata">

        {% if paginator.count %}
            <p id="search-results-title" class="search-results__metadata-count">
                Showing
                {{page.start_index}}-{{page.end_index}}
                (of {{ paginator.count|intcomma }}) result{{ paginator.count|pluralize}}
                for "{{ form.q.value|default:'*' }}"
                in "<span id="analytics-current-bucket" data-current-bucket="{{ buckets.current.label }}">{{ buckets.current.label }}</span>"
            </p>
        {% endif %}

        {% include './search_results__selected-filters.html' %}

        {% if form.errors or not paginator.count %}
            {# No results were found due to criteria not staisfying the refine results filters #}
            {% include './no_results_catalogue_website.html' %}
        {% endif %}

    </div>

    {% if page.object_list %}
        <h2 class="sr-only">Results</h2>

        {% if form.cleaned_data.display == "grid" %}
            <ul class="search-results__list--grid" id="analytics-results-list">
                {% for record in page %}
                    {% include './search_results__list-card--grid.html' %}
                {% endfor %}
            </ul>
        {% else %}
            <ul class="search-results__list" id="analytics-results-list">
                {% for record in page %}
                    {% include './search_results__list-card.html' %}
                {% endfor %}
            </ul>
        {% endif %}
    {% endif %}
</div>
