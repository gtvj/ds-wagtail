{% load search_tags %}

<div class="search-results-hero">
    <h1 class="search-results-hero__heading">{{type}} search results</h1>
    <form action='' method="GET" class="search-results-hero__form" data-id="search-form" id="catalogue-search-form">

        {{ form.q.errors }}
        <label for="{{form.q.id_for_label}}" class="sr-only">Search term</label>
        {{ form.q }}
        
        {{ form.group.as_hidden }}
        {{ form.sort_by.as_hidden }}
        {{ form.display.as_hidden }}
        {{ form.filter_keyword.as_hidden }}
        {{ form.opening_start_date.as_hidden }}
        {{ form.opening_end_date.as_hidden }}
        {% for hidden_field in form.hidden_fields %}
            {{ hidden_field }}
        {% endfor %}

        <input type="submit" value="Search" class="search-results-hero__form-submit">
    </form>

    {% with request.resolver_match.url_name as url_name  %}
        <nav class="search-results-hero__nav" aria-label="Search result types">
            <ul class="search-results-hero__nav-list">
                <li class="search-results-hero__nav-list-item">
                    {% if url_name == 'search-featured' %}
                        <span {% aria-current="true" class="search-results-hero__nav-link">All results</span>
                    {% else %}
                    <a class="search-results-hero__nav-link" href="{% url 'search-featured' %}{% if form.q.value %}?q={{ form.q.value }}{% endif %}">All results</a>
                    {% endif %}
                </li>
                <li class="search-results-hero__nav-list-item">
                    {% if url_name == 'search-catalogue' %}
                        <span {% aria-current="true" class="search-results-hero__nav-link">Catalogue results</span>
                    {% else %}
                    <a class="search-results-hero__nav-link" href="{% url 'search-catalogue' %}{% if form.q.value %}?q={{ form.q.value }}{% endif %}">Catalogue results</a>
                    {% endif %}
                </li>
                <li class="search-results-hero__nav-list-item">
                    {% if url_name == 'search-website' %}
                        <span {% aria-current="true" class="search-results-hero__nav-link">Website results</span>
                    {% else %}
                    <a class="search-results-hero__nav-link" href="{% url 'search-website' %}{% if form.q.value %}?q={{ form.q.value }}{% endif %}">Website results</a>
                    {% endif %}
                </li>
                <li class="search-results-hero__nav-list-item">
                    <div>
                        <a href="/search/featured/" data-link-type=”Link” data-link=”Start a new search”>Start new search</a>
                    </div>
                </li>
            </ul>
        </nav>
    {% endwith %}
</div>


