{% load search_tags %}

<div class="search-results-hero">
    <h1 class="search-results-hero__heading">{{search_tab|search_title}}</h1>
    <form action='' method="GET" class="search-results-hero__form" data-id="search-form" id="catalogue-search-form">

        {{ form.q.errors }}
        <label for="{{form.q.id_for_label}}" class="sr-only">Search term</label>
        {{ form.q }}
        
        {% if search_tab == searchtabs.CATALOGUE.value or search_tab == searchtabs.WEBSITE.value %}
            {{ 'q'|include_hidden_fields:form }}
        {% endif %}

        <input type="submit" value="Search" class="search-results-hero__form-submit">
    </form>

    {% with request.resolver_match.url_name as url_name  %}
        <nav class="search-results-hero__nav" aria-label="Search result types">
            <ul class="search-results-hero__nav-list">
                <li class="search-results-hero__nav-list-item">
                    {% if url_name == 'search-featured' %}
                        <span {% aria-current="true" class="search-results-hero__nav-link">{{searchtabs.ALL.value}}</span>
                    {% else %}
                    <a class="search-results-hero__nav-link" href="{% url 'search-featured' %}{% if form.q.value %}?q={{ form.q.value }}{% endif %}">{{searchtabs.ALL.value}}</a>
                    {% endif %}
                </li>
                <li class="search-results-hero__nav-list-item">
                    {% if url_name == 'search-catalogue' %}
                        <span {% aria-current="true" class="search-results-hero__nav-link">{{searchtabs.CATALOGUE.value}}</span>
                    {% else %}
                    <a class="search-results-hero__nav-link" href="{% url 'search-catalogue' %}{% if form.q.value %}?q={{ form.q.value }}{% endif %}">{{searchtabs.CATALOGUE.value}}</a>
                    {% endif %}
                </li>
                <li class="search-results-hero__nav-list-item">
                    {% if url_name == 'search-website' %}
                        <span {% aria-current="true" class="search-results-hero__nav-link">{{searchtabs.WEBSITE.value}}</span>
                    {% else %}
                    <a class="search-results-hero__nav-link" href="{% url 'search-website' %}{% if form.q.value %}?q={{ form.q.value }}{% endif %}">{{searchtabs.WEBSITE.value}}</a>
                    {% endif %}
                </li>
                <li class="search-results-hero__nav-list-item">
                    <div>
                        <a href="/search/featured/" data-link-type="Link" data-link="Start a new search">Start new search</a>
                    </div>
                </li>
            </ul>
        </nav>
    {% endwith %}
</div>
