{% load search_tags %}

<h2 class="sr-only">Selected filters</h2>
<ul class="search-results__selected-filters">
    {% for field_name, selected_options in form.selected_filters.items %}
        {% for value, label in selected_options %}
            {# IMPORTANT: Never apply '|safe' to value or label here, as validation is not applied to most of these fields #}
            <li class="search-results__selected-filters-item">
                {{ label }}
                <a href="?{% query_string_exclude field_name value %}" class="search-results__selected-filters-item-link"><span class="sr-only">Remove {{ label }} from search</span></a>
            </li>
        {% endfor %}
    {% endfor %}

    {% if form.selected_filters %}
        <li class="search-results__selected-filters-item-remove-all">
            <a href="?q={{ form.cleaned_data.q|default:'' }}&group={{ form.cleaned_data.group|default:'group:tna' }}" class="search-results__selected-filters-item-remove-all-link">Remove all filters</a>
        </li>
    {% endif %}
</ul>
