{% extends 'base_page.html' %}

{% load static i18n wagtailcore_tags wagtailimages_tags wagtailmetadata_tags %}

{% block html_class %}tna-template--pink-accent{% endblock %}

{# Breadcrumb is included inside the header area #}
{% block breadcrumb %}
{% endblock %}

{% block content %}

  <div class="full-width-header full-width-header--pink">
    {% include 'components/breadcrumb.html' %}

    {% include "includes/generic-intro.html" with title=page.title intro=page.intro %}

    <div class="tna-container">
      <div class="tna-column tna-column--full">
        <form class="filters" method="get" action="{% pageurl page %}" data-js-filters-submission>
          <fieldset class="filters__fieldset">
            <legend class="filters__super-title">When</legend>
            <div class="filters__panel">
              <label for="{{ filter_form.date.id_for_label }}" class="filters__label filters__label--top">{{ filter_form.date.label }}</label>
              <p class="filters__help">Format: dd/mm/yyyy</p>
              {{ filter_form.date }}
            </div>
          </fieldset>
          
          <fieldset class="filters__fieldset">
            <legend class="filters__super-title">{{ filter_form.event_type.label }}</legend>
            <div class="filters__radio-list filters__panel">
              {% for radio in filter_form.event_type %}
                <div>
                  {{ radio.tag }}
                  <label for="{{ radio.id_for_label }}" class="filters__label">{{ radio.choice_label }}</label>
                </div>
              {% endfor %}
            </div>
          </fieldset>
          
          <div class="filters__toggle">
            {{ filter_form.is_online_event }}
            <label for="{{ filter_form.is_online_event.id_for_label }}" class="filters__toggle-label">{{ filter_form.is_online_event.label }}</label>
          </div>

          <div class="filters__toggle">
            {{ filter_form.family_friendly }}
            <label for="{{ filter_form.family_friendly.id_for_label }}" class="filters__toggle-label">{{ filter_form.family_friendly.label }}</label>
          </div>
          
          <noscript>
            <input type="submit" value="Apply filters" class="filters__submit tna-button--dark">
          </noscript>
        </form>
      </div>
    </div>
  </div>

  <div class="tna-container tna-container--offset-top tna-container--full-width-mobile event-card-listing">
    <div class="tna-column tna-column--full">
      {% if page.featured_event %}
        {% image page.featured_event.teaser_image fill-1190x600 as featured_img %}
        {% include "../components/featured_card.html" with title=page.featured_event.title href=page.featured_event.url headingLevel="2" headingSize="l" htmlElement="article" imageSrc=featured_img.url imageAlt="featured card image alt" imageWidth=featured_img.width imageHeight=featured_img.height date=page.featured_event.start_date|date:"jS F Y" cost="From Â£16" venue_type=page.featured_event.get_venue_type_display event_type=page.featured_event.event_type access_descriptor=page.featured_event.primary_access_type %}
      {% endif %}

      <hgroup class="event-card-listing__heading-area">
        <h2 class="tna-heading tna-heading--l event-card-listing__heading">All events</h2>
        <p class="event-card-listing__summary">Showing 1 to 12 of {{ page.events|length }} events</p>
      </hgroup>

      <div data-js-whatson-listing>
        {% include "includes/whats-on-listing.html" %}
      </div>
    </div>
  </div>
{% endblock %}


{% block extra_js %}
    <script src="{% static 'scripts/whats_on.js' %}"></script>
 {% endblock %}
