{% extends 'base_page.html' %}

{% load static i18n wagtailcore_tags wagtailimages_tags wagtailmetadata_tags %}

{% block html_class %}tna-template--pink-accent{% endblock %}

{# Breadcrumb is included inside the header area #}
{% block breadcrumb %}
{% endblock %}

{% block content %}
  {# Header area and filters #}
  <div class="full-width-header full-width-header--pink">
    <div class="tna-breadcrumb-wrapper">
      <div class="tna-container">
        <div class="tna-column">
          {% include 'components/breadcrumb.html' %}
        </div>
      </div>
    </div>

    {% include "includes/generic-intro.html" with title=page.title intro=page.intro %}

    <div class="tna-container">
      <div class="tna-column tna-column--full">
        <form class="filters" method="get" action="{% pageurl page %}" data-js-filters-submission>
            <fieldset class="filters__fieldset accordion" data-accordion>
                <legend class="filters__super-title">
                    <button class="filters__dropdown-toggle accordion__button" data-accordion-button>
                        When

                        <i class="fa-solid fa-chevron-down accordion__icon"></i>
                    </button>
                </legend>
                <div class="filters__panel accordion__content" data-accordion-content>
                    <label for="{{ filter_form.date.id_for_label }}" class="filters__label filters__label--top">{{ filter_form.date.label }}</label>
                    <p class="filters__help">Format: dd/mm/yyyy</p>
                    {{ filter_form.date }}
                </div>
            </fieldset>
          
            <fieldset class="filters__fieldset accordion" data-accordion>
                <legend class="filters__super-title">
                    <button class="filters__dropdown-toggle accordion__button" data-accordion-button>
                        {{ filter_form.event_type.label }}

                        <i class="fa-solid fa-chevron-down accordion__icon"></i>
                    </button>
                </legend>
                <div class="filters__radio-list filters__panel accordion__content" data-accordion-content>
                    {% for radio in filter_form.event_type %}
                        <div>
                        {{ radio.tag }}
                        <label for="{{ radio.id_for_label }}" class="filters__label">{{ radio.choice_label }}</label>
                        </div>
                    {% endfor %}
                </div>
            </fieldset>
          
          <div class="filters__toggle">
            {{ filter_form.is_online_event }}
            <label for="{{ filter_form.is_online_event.id_for_label }}" class="filters__toggle-label">{{ filter_form.is_online_event.label }}</label>
          </div>

          <div class="filters__toggle">
            {{ filter_form.family_friendly }}
            <label for="{{ filter_form.family_friendly.id_for_label }}" class="filters__toggle-label">{{ filter_form.family_friendly.label }}</label>
          </div>
          
          <input type="submit" value="Apply filters" class="filters__submit tna-button--dark" data-js-submit>
        </form>
      </div>
    </div>
  </div>

  {# Listing and featured event #}
  <div data-js-whatson-listing aria-live="polite">
    {% include "includes/whats-on-listing.html" %}
  </div>

  {# Related content #}
  {% if page.promoted_links %}
    {% include_block page.promoted_links.0 %}
  {% endif %}


  {% comment %} TODO: use large_links_block.html with real data to replace hard-coded cards below {% endcomment %}
  {% comment %} {% include "../blocks/large_links_block.html" %} {% endcomment %}

  <div class="related-highlight-cards tna-!--margin-top-l tna-!--margin-bottom-l">
    <div class="tna-container">
      <div class="tna-column tna-column--full">
        <h2 class="tna-heading-l card-grid__title">
            Explore more of the National Archives
        </h2>
      </div>
      <div class="tna-column tna-column--flex-1 tna-column--full-tiny" data-container-name="more-ways-to-explore" id="analytics-more-ways-to-explore">
        <div class="related-highlight-cards__card">
          <a href="/" aria-labelledby="related-highlight-card-title-{{ forloop.counter }}" data-component-name="Navigation card: {% if value.heading %}{{ value.heading }}{% else %}{{ page.title }}{% endif %}" data-link-type="Card image" data-card-position="{{ forloop.counter0 }}" data-card-title="{{ link_page.title }}" tabindex="-1">
            {% image link_page.teaser_image fill-540x350 as teaser_image %}
            <img height="350"
                width="540"
                src="{{ teaser_image.url }}"
                class="related-highlight-cards__image"
                alt="" />
          </a>
          <div class="related-highlight-cards__content">
            <p class="related-highlight-cards__card-title" id="related-highlight-card-title-{{ forloop.counter }}">
              <a href="/" class="related-highlight-cards__card-title-link" data-component-name="Navigation card: {% if value.heading %}{{ value.heading }}{% else %}{{ page.title }}{% endif %}" data-link-type="Card text" data-card-position="{{ forloop.counter0 }}" data-card-title="{{ link_page.title }}">
                  Visit
              </a>
            </p>
          </div>
        </div>
      </div>
      <div class="tna-column tna-column--flex-1 tna-column--full-tiny" data-container-name="more-ways-to-explore" id="analytics-more-ways-to-explore">
        <div class="related-highlight-cards__card">
          <a href="/" aria-labelledby="related-highlight-card-title-{{ forloop.counter }}" data-component-name="Navigation card: {% if value.heading %}{{ value.heading }}{% else %}{{ page.title }}{% endif %}" data-link-type="Card image" data-card-position="{{ forloop.counter0 }}" data-card-title="{{ link_page.title }}" tabindex="-1">
            {% image link_page.teaser_image fill-540x350 as teaser_image %}
            <img height="350"
                width="540"
                src="{{ teaser_image.url }}"
                class="related-highlight-cards__image"
                alt="" />
          </a>
          <div class="related-highlight-cards__content">
            <p class="related-highlight-cards__card-title" id="related-highlight-card-title-{{ forloop.counter }}">
              <a href="/" class="related-highlight-cards__card-title-link" data-component-name="Navigation card: {% if value.heading %}{{ value.heading }}{% else %}{{ page.title }}{% endif %}" data-link-type="Card text" data-card-position="{{ forloop.counter0 }}" data-card-title="{{ link_page.title }}">
                  Stories
              </a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}


{% block extra_js %}
  {% if not FEATURE_DISABLE_JS_WHATS_ON_LISTING %}
    <script src="{% static 'scripts/whats_on.js' %}"></script>
  {% endif %}
{% endblock %}

