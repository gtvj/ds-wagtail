{% load wagtailcore_tags wagtailimages_tags i18n %}
<section class="promoted-pages body-container">
    <h2 class="promoted-pages__heading">{% trans value.heading %}</h2>
    <ul class="card-grid card-grid__trio card-grid--list promoted-pages__cards"
        data-container-name="promoted-pages"
        id="analytics-promoted-pages">
        {% for promoted_item in value.promoted_items %}
            <li class="promoted-pages__card">
                <a data-component-name="{{ value.block.label }}" data-link-type="Card image" data-card-position="{{ forloop.counter0 }}" data-card-title="{{ promoted_item.title }}" href="{{ promoted_item.url }}">
                    <picture>
                        {% image promoted_item.teaser_image fill-350x229-c100 format-webp as mobile_webp_image %}
                        <source media="(max-width: 390px)"
                                srcset="{{ mobile_webp_image.url }}"
                                type="image/webp"/>
                        {% image promoted_item.teaser_image fill-370x229-c100 format-webp as desktop_webp_image %}
                        <source srcset="{{ desktop_webp_image.url }}" type="image/webp"/>
                        {% image promoted_item.teaser_image fill-350x229-c100 as mobile_img %}
                        <source srcset="{{ mobile_img.url }}" media="(max-width: 390px)"/>
                        {% image promoted_item.teaser_image fill-370x229-c100 as base_img %}
                        <img src="{{ base_img.url }}"
                             height="{{ base_img.height }}"
                             width="{{ base_img.width }}"
                             class="promoted-pages__image"
                             alt="{% if promoted_item.teaser_image.alt_text %}{{ promoted_item.teaser_image.alt_text }}{% endif %}"/>
                    </picture>
                </a>
                <h3 class="promoted-pages__title">
                    <a data-component-name="{{ value.block.label }}" data-link-type="Card text" data-card-position="{{ forloop.counter0 }}" data-card-title="{{ promoted_item.title }}" class="promoted-pages__title-link" href="{{ promoted_item.url }}">
                        {{ promoted_item.title }}
                    </a>
                </h3>
                <p class="promoted-pages__text promoted-pages__text--gap">By {{ promoted_item.author }} - {{ promoted_item.publication_date }}</p>
                <p class="promoted-pages__text">{{ promoted_item.description }}</p>
            </li>
        {% endfor %}
    </ul>
</section>
