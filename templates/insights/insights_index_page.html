{% extends 'base_page.html' %}

{% load static %}
{% load i18n %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}

{% block content %}
    {% include 'includes/generic-intro.html' %}
    <div class="container">
        <h2 class="sr-only">{% trans "Each collection insight takes an in-depth look into a group of the records we hold." %}</h2>
    </div>

    {% if page.featured_insight %}
    <div class="container">
        <div class="featured-insight">
            {% if page.featured_insight.hero_image %}
                {% image page.featured_insight.hero_image fill-800x1000-c100 as hero %}
                <div class="featured-insight__image" style="background: url('{{ hero.url }}') no-repeat; {{ hero.background_position_style }}"></div>
            {% endif %}

            <div class="featured-insight__description">
                <h2 class="featured-insight__heading">
                    <small>{% trans "Spotlight on" %}</small>
                    {{ page.featured_insight.title }}
                </h2>
                <p>{{ page.featured_insight.sub_heading }}</p>
                <a class="tna-button--dark" href="{% pageurl page.featured_insight %}" data-component-name="Featured Insight: {{ page.featured_insight.title }}" data-link-type="Button">Read</a>
            </div>
        </div>
    </div>
    {% endif %}

    <div class="container">
        {% include_block page.featured_collections %}
    </div>

    <div class="container mt-4" data-container-name="{{ page.title }}">
        <h2>Discover all stories</h2>
        <p>Browse and explore the human stories behind The National Archivesâ€™ collection.</p>
        <ul class="card-group--list-style-none">
            {% for insights_page in insights_pages %}
                {% with page=insights_page.specific %}
                    {% include 'includes/card-group-secondary-nav.html' with heading="Discover all stories" %}
                {% endwith %}
            {% endfor %}
        </ul>
    </div>

{% endblock %}

{% block extra_js %}
    <script src="{% static 'scripts/insights_index_page.js' %}"></script>
{% endblock %}
